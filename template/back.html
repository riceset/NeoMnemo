<div class="prettify-flashcard">
    <div class="prettify-field prettify-field--front" style="font-family:simsun;font-size: 28px; text-align: center;">
        {{Pinyin}}
    </div>

{{#Meaning}}
        <hr class="prettify-divider prettify-divider--answer" id="answer" />
{{/Meaning}}
        <div style="text-align: center;" class="prettify-field prettify-field--back bigimage">{{furigana:Meaning}}</div>

        {{#Details}}
            <div id="showButton" class="prettify-button">+</div>
            <div id="hiddenSection" style="display: none;">
                <hr class="prettify-divider prettify-divider--answer" id="answer" />
                <div class="prettify-field prettify-field--back" style="font-family:YUMIN; text-align: center;">{{furigana:Details}}</div>

                {{#Tags}}
                    <div class="prettify-tags">{{clickable:Tags}}</div>
                {{/Tags}}
            </div>
        {{/Details}}

        {{^Details}}
            {{#Tags}}
                <div id="showButton" class="prettify-button">+</div>
                <div id="hiddenSection" style="display: none;">
                    <hr class="prettify-divider prettify-divider--answer" id="answer" />
                    <div id="textToChangeFont" style="font-family:HGRKK; font-size: 40px; text-align: center;"></div>
                    <div class="prettify-tags">{{clickable:Tags}}</div>
                </div>
            {{/Tags}}
        {{/Details}}

{{Audio}}

<script>
  var isFontOne = true;
  var textElement = document.getElementById('textToChangeFont');

  function toggleFont() {
    if (isFontOne) {
      textElement.style.fontFamily = 'KanjiStrokeOrders';
    } else {
      textElement.style.fontFamily = 'YUMIN';
    }
    isFontOne = !isFontOne;
  }

  textElement.addEventListener('click', toggleFont);
  textElement.addEventListener('touchend', toggleFont);
</script>


<script>
document.getElementById('showButton').addEventListener('click', function() { toggleVisibility('hiddenSection', 'showButton'); });
document.getElementById('showButton').addEventListener('touchend', function() { toggleVisibility('hiddenSection', 'showButton'); });

document.getElementById('showButton2').addEventListener('click', function() { toggleVisibility('hiddenSection2', 'showButton2'); });
document.getElementById('showButton2').addEventListener('touchend', function() { toggleVisibility('hiddenSection2', 'showButton2'); });

function toggleVisibility(hiddenSectionId, buttonId) {
    var hiddenSection = document.getElementById(hiddenSectionId);
    if (hiddenSection.style.display === 'none') {
        hiddenSection.style.display = 'block';
    } else {
        hiddenSection.style.display = 'none';
    }
    document.getElementById(buttonId).style.display = 'none';
}
</script>

<script>
    document.getElementById('newShowButton').addEventListener('click', function() { 
        toggleVisibility('newHiddenSection', 'newShowButton'); 
    });
    document.getElementById('newShowButton').addEventListener('touchend', function() { 
        toggleVisibility('newHiddenSection', 'newShowButton'); 
    });

    function toggleVisibility(hiddenSectionId, buttonId) {
        var hiddenSection = document.getElementById(hiddenSectionId);
        if (hiddenSection.style.display === 'none') {
            hiddenSection.style.display = 'block';
        } else {
            hiddenSection.style.display = 'none';
        }
        document.getElementById(buttonId).style.display = 'none';
    }
</script>

<script>
  // Split hierarchical tags
  var tagsContainerEl = document.querySelectorAll('.prettify-tags > *')
  if (tagsContainerEl.length > 0) {
    var tags = []
    tagsContainerEl.forEach((tagEl) => {
      tagEl.classList.add('prettify-tag')
      tags.push(tagEl.innerHTML)
      tags.forEach((tag) => {
        var childTag = tag.split('::').filter(Boolean)
        tagEl.innerHTML = childTag[childTag.length - 1].trim()
      })
    })
  } else {
    tagsContainerEl = document.querySelector('.prettify-tags')
    var tags = tagsContainerEl.innerHTML.split(' ').filter(Boolean)
    var html = ''
    tags.forEach((tag) => {
      var childTag = tag.split('::').filter(Boolean)
      html +=
        "<span class='prettify-tag'>" +
        childTag[childTag.length - 1] +
        '</span>'
    })
    tagsContainerEl.innerHTML = html
  }
</script>

<script>
  // Breadcrumbs to current deck
  var deckEl = document.querySelector('.prettify-deck')
  var subDecks = deckEl.innerHTML.split('::').filter(Boolean)
  html = []
  subDecks.forEach((subDeck) => {
    html.push("<span class='prettify-subdeck'>" + subDeck + '</span>')
  })
  deckEl.innerHTML = html.join('&nbsp;/&nbsp;')
</script>
